<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ThunderAI Settings</title>
    <link rel="stylesheet" href="options.css" />
  </head>
  <body>
    <main>
      <h1>ThunderAI Settings</h1>
      <p class="help">
        Connect through OpenAI/Codex login. No OpenAI API key is required in Thunderbird.
      </p>

      <section class="card">
        <h2>OpenAI Account</h2>
        <p id="auth-state" class="auth-state">Not connected</p>
        <div class="actions">
          <button id="connect-account" type="button">Connect OpenAI</button>
          <button id="refresh-status" type="button" class="secondary">Refresh status</button>
          <button id="disconnect-account" type="button" class="secondary">Log out</button>
        </div>
      </section>

      <form id="settings-form" class="card">
        <h2>Backend</h2>
        <label for="backend-url">Backend URL</label>
        <input id="backend-url" type="url" value="http://127.0.0.1:8787" />

        <label for="codex-model">Codex model</label>
        <input id="codex-model" type="text" value="gpt-5.3-codex" />

        <label for="preferred-language">Default language</label>
        <input id="preferred-language" type="text" value="Polish" />

        <button type="submit">Save settings</button>
      </form>

      <p class="help small">
        Login flow: add-on asks backend to start `codex login --device-auth`, opens OpenAI page, then waits for confirmation.
      </p>
      <p id="status" role="status"></p>
    </main>

    <script src="options.js"></script>
  </body>
</html>
